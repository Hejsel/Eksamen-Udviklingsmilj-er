<!DOCTYPE html>
<html lang="da">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Moduler</title>
    <link href="/dist/styles.css" rel="stylesheet" />
    <script src="/src/js/loadComponents.js" defer></script>
    <script src="/src/js/activeLinks.js" defer></script>
  </head>

  <body>
    <!-- HEADER som henter header.html ind på siden!!! -->
    <header id="header"></header>

    <main>
      <!-- //TODO - HERO banner og agenda + opgavebeskrivelse -->
      <section class="container px-8 py-16 rounded-lg shadow-lg bg-gray-50">
        <div
          class="flex flex-col items-center mx-auto space-y-8 max-w-7xl md:flex-row md:space-y-0 md:space-x-16"
        >
          <!-- Venstre kolonne: Tekst -->
          <div class="md:w-2/3">
            <!-- Opgavebeskrivelse -->
            <h1 class="mb-6 text-4xl font-bold text-blue-600">
              Forståelse og Implementering af Moduler i JavaScript
            </h1>
            <p class="mb-6 text-lg leading-relaxed text-gray-700">
              Moduler er en central del af moderne softwareudvikling. De hjælper med at strukturere
              og genbruge kode på tværs af projekter. Denne præsentation vil dække:
            </p>

            <!-- Agenda -->
            <ul class="pl-6 mb-6 space-y-4 text-gray-700 list-disc">
              <li>
                <strong>Formål med moduler:</strong> Hvorfor moduler er essentielle i
                softwareudvikling.
              </li>
              <li>
                <strong>Opbygning og brug:</strong> Hvordan moduler oprettes og anvendes i
                JavaScript.
              </li>
              <li>
                <strong>CommonJS vs. EcmaScript-moduler:</strong> Forskelle, fordele og ulemper.
              </li>
              <li>
                <strong>Omdøbning:</strong> Sådan omdøbes elementer fra moduler for bedre læsbarhed.
              </li>
              <li><strong>Kodeeksempler:</strong> Praktiske eksempler fra egne projekter.</li>
            </ul>

            <!-- Fold ud-knap -->
            <details class="p-4 bg-blue-100 rounded-lg shadow">
              <summary class="text-lg font-semibold text-blue-600 cursor-pointer">
                Klik her for at læse hele opgavebeskrivelsen
              </summary>
              <div class="mt-4 leading-relaxed text-gray-700">
                <p>
                  <strong>Moduler</strong><br />
                  Fortæl generelt om formålet med moduler i softwareudvikling. Beskriv dernæst
                  konkret hvordan moduler opbygges og anvendes i JavaScript. Kom ind på forskellen
                  på CommonJS- og EcmaScript-moduler. Nævn bl.a. mulighederne for at omdøbe
                  modulelementer.
                </p>
                <p class="mt-4">
                  Fragmenter af kode til illustration af dine overvejelser skal være en del af
                  præsentationen. Du bør bruge uddrag fra egne projekter og opgaver som eksempler i
                  din gennemgang.
                </p>
              </div>
            </details>
          </div>

          <!-- Højre kolonne: Billede -->
          <div class="md:w-1/3">
            <div
              class="flex items-center justify-center w-full h-64 bg-blue-100 rounded-lg shadow-lg"
            >
              <!-- Pladsholder til billede -->

              <p class="text-2xl font-bold text-blue-700">4. Moduler</p>
            </div>
          </div>
        </div>
      </section>

      <!-- //TODO - Formålet med sectioner -->
      <section class="container px-6 py-8 bg-gray-100 rounded-lg shadow-lg">
        <h2 class="mb-6 text-2xl font-bold text-gray-800">
          Formålet med moduler i softwareudvikling
        </h2>
        <p class="mb-6 text-gray-700">
          Moduler bruges til at opdele koden i mindre, selvstændige dele, der kan genbruges, testes
          og vedligeholdes uafhængigt af hinanden. De hjælper med at holde kodebasen organiseret og
          reducerer kompleksiteten i store projekter. Formålet med moduler er at:
        </p>

        <!-- Kasser med formål -->
        <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
          <!-- Kasse 1 -->
          <div class="p-4 bg-white rounded-lg shadow-md">
            <h3 class="text-lg font-semibold text-blue-600">Genbruge kode</h3>
            <p class="text-gray-700">
              Undgå gentagelser (DRY-princippet) ved at dele funktionalitet mellem forskellige dele
              af applikationen.
            </p>
          </div>

          <!-- Kasse 2 -->
          <div class="p-4 bg-white rounded-lg shadow-md">
            <h3 class="text-lg font-semibold text-green-600">Forbedre læsbarhed</h3>
            <p class="text-gray-700">
              Opdel funktionalitet i meningsfulde dele, så koden bliver lettere at forstå og
              navigere i.
            </p>
          </div>

          <!-- Kasse 3 -->
          <div class="p-4 bg-white rounded-lg shadow-md">
            <h3 class="text-lg font-semibold text-orange-600">Forenkle vedligeholdelse</h3>
            <p class="text-gray-700">
              Ændringer i ét modul påvirker ikke resten af systemet, hvilket gør fejlrettelse og
              opdatering nemmere.
            </p>
          </div>

          <!-- Kasse 4 -->
          <div class="p-4 bg-white rounded-lg shadow-md">
            <h3 class="text-lg font-semibold text-purple-600">Understøtte teamwork</h3>
            <p class="text-gray-700">
              Udviklere kan arbejde på separate moduler uden konflikter, hvilket forbedrer
              samarbejdet i større teams.
            </p>
          </div>
        </div>
      </section>

      <!-- //TODO - Moduler i JS -->
      <section class="container px-8 py-16 rounded-lg shadow-lg bg-gray-50">
        <div class="mx-auto space-y-12 max-w-7xl">
          <!-- Overskrift -->
          <h2 class="text-4xl font-bold text-blue-600">Moduler i JavaScript</h2>

          <!-- Introduktion -->
          <div class="space-y-6 text-lg text-gray-700">
            <p>
              Moduler er essentielle for at strukturere, organisere og genanvende kode i JavaScript.
              Et modul er en fil, der indeholder funktioner, variabler eller objekter, som kan
              eksporteres og importeres i andre filer.
            </p>
            <p>
              I JavaScript er der to primære modulformater:
              <strong>CommonJS (CJS)</strong>, som bruges i Node.js, og
              <strong>EcmaScript-moduler (ESM)</strong>, som er den moderne standard og fungerer i
              både browsere og Node.js.
            </p>
          </div>

          <!-- Opbygning af Moduler -->
          <div>
            <h3 class="mb-4 text-2xl font-semibold text-gray-800">Opbygning af Moduler</h3>
            <p class="mb-6 text-gray-700">
              Moduler opbygges ved at eksportere funktioner, variabler eller objekter fra en fil.
              Her er eksempler på, hvordan du opbygger moduler med både CommonJS og
              EcmaScript-moduler:
            </p>

            <!-- Eksempel: CommonJS -->
            <details class="p-4 mb-6 bg-blue-100 rounded-lg shadow">
              <summary class="text-lg font-semibold text-blue-600 cursor-pointer">
                Eksempel: CommonJS-modul
              </summary>
              <div class="mt-4">
                <pre class="p-4 text-sm bg-gray-800 rounded-lg text-gray-50">
<span class="text-green-400">// src/modules/common-js-modules/pathConstructor.cjs</span>
const path = require("path");

const pathConstructor = (url) => {
  const projectRoot = path.resolve(__dirname, "../../..");
  return path.join(projectRoot, url);
};

module.exports = { pathConstructor };
          </pre>
                <p class="mt-4 text-gray-700">
                  I CommonJS bruges <code>module.exports</code> til at eksportere funktioner, som
                  derefter kan importeres med <code>require()</code>.
                </p>
              </div>
            </details>

            <!-- Eksempel: EcmaScript -->
            <details class="p-4 bg-green-100 rounded-lg shadow">
              <summary class="text-lg font-semibold text-green-600 cursor-pointer">
                Eksempel: EcmaScript-modul
              </summary>
              <div class="mt-4">
                <pre class="p-4 text-sm bg-gray-800 rounded-lg text-gray-50">
<span class="text-green-400">// src/modules/es-modules/pathConstructor.mjs</span>
import path from "path";

export const pathConstructor = (url) => {
  const projectRoot = new URL("../../..", import.meta.url).pathname;
  return `${projectRoot}/${url}`;
};
          </pre>
                <p class="mt-4 text-gray-700">
                  I EcmaScript-moduler bruges <code>export</code> til at eksportere funktioner, og
                  <code>import</code> bruges til at hente dem i andre filer.
                </p>
              </div>
            </details>
          </div>

          <!-- Anvendelse af Moduler -->
          <div>
            <h3 class="mb-4 text-2xl font-semibold text-gray-800">Anvendelse af Moduler</h3>
            <p class="mb-6 text-gray-700">
              Når et modul er opbygget, kan det importeres og bruges i andre filer. Her er eksempler
              på anvendelse med både CommonJS og EcmaScript-moduler:
            </p>

            <!-- Eksempel: Brug af CommonJS-modul -->
            <details class="p-4 mb-6 bg-blue-100 rounded-lg shadow">
              <summary class="text-lg font-semibold text-blue-600 cursor-pointer">
                Eksempel: Brug af CommonJS-modul
              </summary>
              <div class="mt-4">
                <pre class="p-4 text-sm bg-gray-800 rounded-lg text-gray-50">
<span class="text-green-400">// src/app.cjs</span>
const { pathConstructor } = require("./modules/common-js-modules/pathConstructor.cjs");

const filePath = pathConstructor("/public/index.html");
console.log(`Filsti: ${filePath}`);
          </pre>
                <p class="mt-4 text-gray-700">
                  CommonJS-moduler importeres med <code>require()</code>, og funktioner bruges
                  direkte i koden.
                </p>
              </div>
            </details>

            <!-- Eksempel: Brug af EcmaScript-modul -->
            <details class="p-4 bg-green-100 rounded-lg shadow">
              <summary class="text-lg font-semibold text-green-600 cursor-pointer">
                Eksempel: Brug af EcmaScript-modul
              </summary>
              <div class="mt-4">
                <pre class="p-4 text-sm bg-gray-800 rounded-lg text-gray-50">
<span class="text-green-400">// src/app.mjs</span>
import { pathConstructor } from "./modules/es-modules/pathConstructor.mjs";

const filePath = pathConstructor("/public/index.html");
console.log(`Filsti: ${filePath}`);
          </pre>
                <p class="mt-4 text-gray-700">
                  EcmaScript-moduler importeres med <code>import</code>, og funktioner bruges
                  direkte i koden.
                </p>
              </div>
            </details>
          </div>

          <!-- Fordele ved Moduler -->
          <div>
            <h3 class="mb-4 text-2xl font-semibold text-gray-800">Fordele ved Moduler</h3>
            <ul class="pl-6 space-y-4 text-gray-700 list-disc">
              <li><strong>Genanvendelighed:</strong> Koden kan bruges på tværs af projekter.</li>
              <li>
                <strong>Modularitet:</strong> Koden opdeles i mindre og mere overskuelige enheder.
              </li>
              <li>
                <strong>Skalerbarhed:</strong> Nye funktioner kan tilføjes som separate moduler.
              </li>
              <li>
                <strong>Vedligeholdelse:</strong> Hver fil har et klart ansvar, hvilket gør fejl
                lettere at rette.
              </li>
            </ul>
          </div>

          <!-- Mappestruktur -->
          <div>
            <h3 class="mb-4 text-2xl font-semibold text-gray-800">Projektets Mappestruktur</h3>
            <pre class="p-4 text-sm bg-gray-800 rounded-lg text-gray-50">
project/
├── server.cjs
├── server.mjs
├── src/
│   ├── app.cjs
│   ├── app.mjs
│   ├── modules/
│       ├── aggregator.cjs
│       ├── aggregator.mjs
│       ├── common-js-modules/
│           ├── mimeTypes.cjs
│           ├── pathConstructor.cjs
│       ├── es-modules/
│           ├── mimeTypes.mjs
│           ├── pathConstructor.mjs
      </pre
            >
            <p class="mt-4 text-gray-700">
              Denne mappestruktur organiserer filer og moduler, hvilket gør det nemt at finde og
              genbruge kode.
            </p>
          </div>
        </div>
      </section>

      <!-- //TODO - Projektstruktur i JS -->
      <section class="container px-6 py-8 mx-auto space-y-12 bg-gray-50">
        <!-- Sektionens overskrift -->
        <h2 class="mb-12 text-4xl font-bold text-center text-blue-600">
          Projektstruktur og Modulopbygning i JavaScript
        </h2>

        <!-- Grid layout til kort -->
        <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
          <!-- Kort: Projektets Rod -->
          <div class="p-6 bg-white rounded-lg shadow-lg">
            <div class="flex items-center mb-4">
              <span class="mr-3 text-4xl text-blue-500">📂</span>
              <h3 class="text-xl font-bold text-gray-800">Projektets Rod</h3>
            </div>
            <p class="mb-4 text-gray-700">
              Rodmappen er startpunktet for projektet og indeholder essentielle filer, som gør det
              muligt at køre applikationen:
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>server.cjs:</strong> Starter serveren ved brug af CommonJS-standard. Den
                integrerer moduler og applikationslogik.
              </li>
              <li>
                <strong>server.mjs:</strong> Starter serveren ved brug af EcmaScript-moduler, der
                giver moderne syntaks og bedre tree-shaking.
              </li>
            </ul>
          </div>

          <!-- Kort: src/ -->
          <div class="p-6 bg-white rounded-lg shadow-lg">
            <div class="flex items-center mb-4">
              <span class="mr-3 text-4xl text-green-500">📁</span>
              <h3 class="text-xl font-bold text-gray-800">src/: Applikationsfiler</h3>
            </div>
            <p class="mb-4 text-gray-700">
              <code>src/</code> mappen indeholder applikationens kernefiler, som definerer, hvordan
              serveren fungerer:
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>app.cjs:</strong> Implementerer serverlogikken ved brug af CommonJS-moduler.
                Filer håndteres via <code>fs</code>, og stier konstrueres dynamisk.
              </li>
              <li>
                <strong>app.mjs:</strong> Gør det samme som <code>app.cjs</code>, men bruger
                ESM-syntaks for bedre kompatibilitet med moderne standarder.
              </li>
            </ul>
          </div>

          <!-- Kort: src/modules -->
          <div class="p-6 bg-white rounded-lg shadow-lg">
            <div class="flex items-center mb-4">
              <span class="mr-3 text-4xl text-orange-500">🔧</span>
              <h3 class="text-xl font-bold text-gray-800">src/modules/: Moduler</h3>
            </div>
            <p class="mb-4 text-gray-700">
              <code>src/modules/</code> mappen organiserer kode i mindre moduler, hvilket gør det
              muligt at genbruge funktioner og holde applikationen skalerbar:
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>aggregator.cjs:</strong> Samler funktioner fra moduler i `common-js-modules`
                og eksporterer dem som én samlet enhed.
              </li>
              <li>
                <strong>aggregator.mjs:</strong> Gør det samme som <code>aggregator.cjs</code>, men
                understøtter EcmaScript-moduler.
              </li>
            </ul>
          </div>

          <!-- Kort: src/modules/common-js-modules -->
          <div class="p-6 bg-white rounded-lg shadow-lg">
            <div class="flex items-center mb-4">
              <span class="mr-3 text-4xl text-purple-500">🗂️</span>
              <h3 class="text-xl font-bold text-gray-800">common-js-modules</h3>
            </div>
            <p class="mb-4 text-gray-700">
              Indeholder moduler skrevet i CommonJS-format, som fokuserer på grundlæggende
              funktioner:
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>mimeTypes.cjs:</strong> Indeholder en liste over MIME-typer, der bruges til
                at bestemme indholdstyper baseret på filendelser (f.eks. <code>.html</code> eller
                <code>.png</code>).
              </li>
              <li>
                <strong>pathConstructor.cjs:</strong> Funktion, der dynamisk opretter filstier
                baseret på URL'er, hvilket sikrer korrekt filhåndtering.
              </li>
            </ul>
          </div>

          <!-- Kort: src/modules/es-modules -->
          <div class="p-6 bg-white rounded-lg shadow-lg">
            <div class="flex items-center mb-4">
              <span class="mr-3 text-4xl text-teal-500">📜</span>
              <h3 class="text-xl font-bold text-gray-800">es-modules</h3>
            </div>
            <p class="mb-4 text-gray-700">
              Indeholder moduler skrevet i EcmaScript-modulstandard (ESM), der giver forbedret
              kompatibilitet med moderne værktøjer:
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>mimeTypes.mjs:</strong> Ligner <code>mimeTypes.cjs</code>, men bruger
                ESM-syntaks med <code>export</code> og <code>import</code>.
              </li>
              <li>
                <strong>pathConstructor.mjs:</strong> Gør det samme som
                <code>pathConstructor.cjs</code>, men implementeret med ESM.
              </li>
            </ul>
          </div>

          <!-- Kort: Overordnet Struktur -->
          <div class="p-6 bg-white rounded-lg shadow-lg">
            <div class="flex items-center mb-4">
              <span class="mr-3 text-4xl text-gray-800">🗺️</span>
              <h3 class="text-xl font-bold text-gray-800">Overordnet Struktur</h3>
            </div>
            <p class="mb-4 text-gray-700">
              Projektets struktur er designet til at være modulær og skalerbar. Hver del har et
              klart ansvar:
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>Serverfiler:</strong> <code>server.cjs</code> og
                <code>server.mjs</code> starter applikationen og binder alt sammen.
              </li>
              <li>
                <strong>Applikationsfiler:</strong> <code>app.cjs</code> og <code>app.mjs</code>
                håndterer serverlogikken.
              </li>
              <li>
                <strong>Moduler:</strong> `aggregator` samler funktionaliteten fra
                <code>mimeTypes</code> og <code>pathConstructor</code>.
              </li>
              <li>
                <strong>Genanvendelige moduler:</strong> Filer i `common-js-modules` og `es-modules`
                leverer grundlæggende funktioner som MIME-typer og sti-konstruktion.
              </li>
            </ul>
          </div>
        </div>
      </section>

      <section class="container px-6 py-8 mx-auto bg-gray-50">
        <h2 class="mb-12 text-4xl font-bold text-center text-blue-600">
          Projektstruktur og Forklaringer
        </h2>

        <!-- Fold-ud: Projektets Rod -->
        <details class="mb-6 bg-white rounded-lg shadow">
          <summary class="p-4 text-2xl font-semibold text-blue-600 cursor-pointer">
            Projektets Rod
          </summary>
          <div class="p-6 space-y-4">
            <p class="text-lg text-gray-700">
              Rodmappen indeholder de centrale serverfiler, der starter applikationen:
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>server.cjs:</strong> CommonJS-server, som fungerer som hovedindgang for
                applikationen ved brug af CommonJS.
              </li>
              <li>
                <strong>server.mjs:</strong> EcmaScript-modulserver, som bruger moderne ESM-syntaks
                til at starte applikationen.
              </li>
            </ul>
            <h3 class="mt-4 text-xl font-bold text-gray-800">Eksempel: server.mjs</h3>
            <pre class="p-4 text-sm text-gray-100 bg-gray-800 rounded-lg">
<span class="text-green-400">// Importer server-logik fra app.mjs</span>
import { createServer } from './src/app.mjs';

<span class="text-green-400">// Definer port og hostname</span>
const port = 8080;
const hostname = 'localhost';

<span class="text-green-400">// Start serveren</span>
createServer(port, hostname);
      </pre>
            <p class="mt-4 text-gray-700">
              - <code>import</code>: Importerer <code>createServer</code> fra app.mjs.<br />
              - <code>port</code> og <code>hostname</code>: Definerer, hvor serveren kører.<br />
              - <code>createServer</code>: Starter serveren ved hjælp af app.mjs.
            </p>
          </div>
        </details>

        <!-- Fold-ud: src/ -->
        <details class="mb-6 bg-white rounded-lg shadow">
          <summary class="p-4 text-2xl font-semibold text-green-600 cursor-pointer">
            src/: Applikationsfiler
          </summary>
          <div class="p-6 space-y-4">
            <p class="text-lg text-gray-700">
              <code>src/</code> mappen indeholder applikationens kernefiler og logik:
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>app.cjs:</strong> Indeholder applikationslogikken for serveren ved brug af
                CommonJS.
              </li>
              <li>
                <strong>app.mjs:</strong> Indeholder applikationslogikken for serveren ved brug af
                EcmaScript-moduler.
              </li>
            </ul>
            <h3 class="mt-4 text-xl font-bold text-gray-800">Eksempel: app.mjs</h3>
            <pre class="p-4 text-sm text-gray-100 bg-gray-800 rounded-lg">
<span class="text-green-400">// Importer nødvendige moduler</span>
import http from 'http';
import fs from 'fs';
import path from 'path';
import { filHaandteringESM } from './modules/aggregator.mjs';

<span class="text-green-400">// Eksporterer en funktion til at oprette serveren</span>
export const createServer = (port, hostname) => {
  http.createServer((request, response) => {
    <span class="text-green-400">// Konstruer filstien fra URL'en</span>
    let filsti = filHaandteringESM.pathConstructorESM(request.url);

    <span class="text-green-400">// Tjek om URL'en peger på en mappe</span>
    if (filsti.endsWith(path.sep)) {
      filsti = path.join(filsti, 'index.html');
    }

    <span class="text-green-400">// Tjek om filen findes</span>
    fs.access(filsti, fs.constants.F_OK, (err) => {
      if (err) {
        response.writeHead(404, { 'Content-Type': 'text/plain' });
        response.end('404: Fil ikke fundet');
        return;
      }

      <span class="text-green-400">// Find MIME-typen</span>
      const ext = path.extname(filsti).substring(1);
      const mimeType = filHaandteringESM.mimeTyperESM[ext] || 'application/octet-stream';

      <span class="text-green-400">// Læs og send filen</span>
      fs.readFile(filsti, (err, data) => {
        if (err) {
          response.writeHead(500, { 'Content-Type': 'text/plain' });
          response.end('500: Serverfejl');
          return;
        }
        response.writeHead(200, { 'Content-Type': mimeType });
        response.end(data);
      });
    });
  }).listen(port, hostname, () => {
    console.log(\`Serveren kører på http://\${hostname}:\${port}/\`);
  });
};
      </pre>
            <p class="mt-4 text-gray-700">
              - <code>http.createServer</code>: Opretter en HTTP-server, der lytter til
              anmodninger.<br />
              - <code>filHaandteringESM.pathConstructorESM</code>: Konverterer URL'er til lokale
              filstier.<br />
              - <code>fs.access</code>: Tjekker om filen findes.<br />
              - <code>fs.readFile</code>: Læser filens indhold og sender det til klienten.
            </p>
          </div>
        </details>

        <!-- Fold-ud: src/modules -->
        <details class="mb-6 bg-white rounded-lg shadow">
          <summary class="p-4 text-2xl font-semibold text-orange-600 cursor-pointer">
            src/modules/: Moduler
          </summary>
          <div class="p-6 space-y-4">
            <p class="text-lg text-gray-700">
              <code>src/modules/</code> mappen indeholder moduler, der opdeler funktionaliteten i
              mindre komponenter:
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>aggregator.cjs:</strong> Samler og eksporterer funktioner fra
                `common-js-modules`.
              </li>
              <li>
                <strong>aggregator.mjs:</strong> Samler og eksporterer funktioner fra `es-modules`.
              </li>
            </ul>
            <h3 class="mt-4 text-xl font-bold text-gray-800">Eksempel: aggregator.mjs</h3>
            <pre class="p-4 text-sm text-gray-100 bg-gray-800 rounded-lg">
<span class="text-green-400">// Importer moduler</span>
import * as stiFunktionerESM from './es-modules/pathConstructor.mjs';
import * as mimeTyperESM from './es-modules/mimeTypes.mjs';

<span class="text-green-400">// Saml og eksporter funktionaliteten</span>
export const filHaandteringESM = {
  pathConstructorESM: stiFunktionerESM.pathConstructor,
  mimeTyperESM: mimeTyperESM.default,
};
      </pre>
            <p class="mt-4 text-gray-700">
              - <code>pathConstructorESM</code>: Funktion til at håndtere URL'er og lave korrekte
              filstier.<br />
              - <code>mimeTyperESM</code>: Indeholder MIME-typer til at bestemme filindhold.
            </p>
          </div>
        </details>
        <!-- Fold-ud: src/modules/common-js-modules -->
        <details class="mb-6 bg-white rounded-lg shadow">
          <summary class="p-4 text-2xl font-semibold text-purple-600 cursor-pointer">
            src/modules/common-js-modules/: CommonJS Moduler
          </summary>
          <div class="p-6 space-y-4">
            <p class="text-lg text-gray-700">
              Denne mappe indeholder moduler i CommonJS-format, der bruges til at håndtere
              specifikke funktioner som filstier og MIME-typer:
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>mimeTypes.cjs:</strong> Indeholder en liste over MIME-typer til at
                identificere indholdstyper for forskellige filer.
              </li>
              <li>
                <strong>pathConstructor.cjs:</strong> En funktion, der konstruerer filstier baseret
                på URL'er.
              </li>
            </ul>
            <h3 class="mt-4 text-xl font-bold text-gray-800">Eksempel: pathConstructor.cjs</h3>
            <pre class="p-4 text-sm text-gray-100 bg-gray-800 rounded-lg">
<span class="text-green-400">// Importer path-modulet</span>
const path = require('path');

<span class="text-green-400">// Eksporter funktion til at konstruere filstier</span>
module.exports = {
  pathConstructor(url) {
    const projectRoot = path.resolve(__dirname, '../../..');
    const cleanUrl = url.split('?')[0];
    if (cleanUrl === '/' || cleanUrl === '') {
      return path.join(projectRoot, 'public', 'index.html');
    }
    return path.join(projectRoot, cleanUrl);
  },
};
    </pre>
            <p class="mt-4 text-gray-700">
              - <code>path.resolve</code>: Finder projektets rodmappe.<br />
              - <code>url.split('?')</code>: Fjerner query-parametre fra URL'en.<br />
              - <code>path.join</code>: Konstruerer filstien.
            </p>
          </div>
        </details>

        <!-- Fold-ud: src/modules/es-modules -->
        <details class="mb-6 bg-white rounded-lg shadow">
          <summary class="p-4 text-2xl font-semibold text-teal-600 cursor-pointer">
            src/modules/es-modules/: EcmaScript Moduler
          </summary>
          <div class="p-6 space-y-4">
            <p class="text-lg text-gray-700">
              Denne mappe indeholder moduler skrevet i EcmaScript-modulformat (ESM), der giver
              forbedret kompatibilitet og understøtter moderne syntaks:
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>mimeTypes.mjs:</strong> Indeholder en liste over MIME-typer, der bruges til
                at identificere indholdstyper for forskellige filer.
              </li>
              <li>
                <strong>pathConstructor.mjs:</strong> En funktion, der konstruerer filstier baseret
                på URL'er ved brug af moderne ESM-syntaks.
              </li>
            </ul>
            <h3 class="mt-4 text-xl font-bold text-gray-800">Eksempel: mimeTypes.mjs</h3>
            <pre class="p-4 text-sm text-gray-100 bg-gray-800 rounded-lg">
<span class="text-green-400">// Eksporter liste over MIME-typer</span>
export default {
  html: 'text/html',
  css: 'text/css',
  js: 'text/javascript',
  png: 'image/png',
  svg: 'image/svg+xml',
  jpg: 'image/jpeg',
  ico: 'image/x-icon',
};
    </pre>
            <p class="mt-4 text-gray-700">
              - MIME-typer definerer, hvordan klienter (som browsere) skal håndtere forskellige
              filtyper.<br />
              - <code>export default</code>: Eksporterer MIME-typer som standardobjekt, så de kan
              importeres direkte.
            </p>
          </div>
        </details>

        <!-- Fold-ud: Overordnet Struktur og Fordele -->
        <details class="mb-6 bg-white rounded-lg shadow">
          <summary class="p-4 text-2xl font-semibold text-gray-800 cursor-pointer">
            Overordnet Struktur og Fordele
          </summary>
          <div class="p-6 space-y-4">
            <p class="text-lg text-gray-700">
              Projektets struktur er designet med fokus på modularitet, fleksibilitet og
              genanvendelighed.
            </p>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>Serverfiler:</strong> <code>server.cjs</code> og
                <code>server.mjs</code> binder applikationen sammen og starter serveren.
              </li>
              <li>
                <strong>Applikationsfiler:</strong> <code>app.cjs</code> og
                <code>app.mjs</code> håndterer serverens logik.
              </li>
              <li>
                <strong>Moduler:</strong> aggregator-moduler samler funktionaliteten fra
                individuelle moduler som <code>mimeTypes</code> og <code>pathConstructor</code>.
              </li>
              <li>
                <strong>Genanvendelige moduler:</strong> Filer i `common-js-modules` og `es-modules`
                leverer grundlæggende funktioner som MIME-typer og filsti-konstruktion.
              </li>
            </ul>
            <h3 class="mt-4 text-xl font-bold text-gray-800">Fordele ved Modulopbygning</h3>
            <ul class="pl-6 space-y-2 text-gray-700 list-disc">
              <li>
                <strong>Modularitet:</strong> Funktionalitet er opdelt i selvstændige dele som
                pathConstructor og mimeTypes, hvilket gør dem nemme at genbruge og teste.
              </li>
              <li>
                <strong>Fleksibilitet:</strong> Projektet understøtter både CommonJS og ESM, så du
                kan skifte mellem standarder afhængigt af behov.
              </li>
              <li>
                <strong>Skalerbarhed:</strong> Nye MIME-typer eller stihåndteringsfunktioner kan let
                tilføjes uden at påvirke eksisterende funktionalitet.
              </li>
              <li>
                <strong>Robusthed:</strong> Fejlhåndtering er implementeret i pathConstructor og
                serverfilerne, hvilket sikrer stabil drift.
              </li>
            </ul>
          </div>
        </details>
      </section>

      <!-- //TODO - Forskelle mellem ESM og CJS -->
      <section class="container px-6 py-8 space-y-6 rounded-lg shadow-lg bg-gray-50">
        <!-- Overskrift -->
        <h2 class="text-2xl font-bold text-gray-800">Forskelle mellem ESM og CJS</h2>

        <!-- Foldbar tabel -->
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
            <thead>
              <tr class="text-gray-700 bg-gray-200">
                <th class="px-4 py-2 text-left border-b border-gray-300">Funktion</th>
                <th class="px-4 py-2 text-left border-b border-gray-300">CommonJS (CJS)</th>
                <th class="px-4 py-2 text-left border-b border-gray-300">
                  EcmaScript-moduler (ESM)
                </th>
              </tr>
            </thead>
            <tbody class="text-gray-600">
              <!-- Row 1 -->
              <tr class="cursor-pointer" onclick="toggleRow(1)">
                <td class="px-4 py-2 border-b border-gray-300">Syntaks</td>
                <td class="px-4 py-2 border-b border-gray-300">require og module.exports</td>
                <td class="px-4 py-2 border-b border-gray-300">import og export</td>
              </tr>
              <tr id="row-1" class="hidden">
                <td
                  colspan="3"
                  class="px-4 py-2 text-gray-700 bg-gray-100 border-b border-gray-300"
                >
                  <p>
                    CommonJS bruger `require` og `module.exports` til at håndtere moduler, mens ESM
                    bruger `import` og `export`, som er mere moderne og understøtter tree-shaking.
                  </p>
                </td>
              </tr>

              <!-- Row 2 -->
              <tr class="cursor-pointer" onclick="toggleRow(2)">
                <td class="px-4 py-2 border-b border-gray-300">Anvendelse</td>
                <td class="px-4 py-2 border-b border-gray-300">Node.js</td>
                <td class="px-4 py-2 border-b border-gray-300">Browsere og Node.js</td>
              </tr>
              <tr id="row-2" class="hidden">
                <td
                  colspan="3"
                  class="px-4 py-2 text-gray-700 bg-gray-100 border-b border-gray-300"
                >
                  <p>
                    CommonJS blev designet til Node.js-miljøet, mens ESM fungerer i både browsere og
                    moderne versioner af Node.js.
                  </p>
                </td>
              </tr>

              <!-- Row 3 -->
              <tr class="cursor-pointer" onclick="toggleRow(3)">
                <td class="px-4 py-2 border-b border-gray-300">Dynamisk import</td>
                <td class="px-4 py-2 border-b border-gray-300">Muligt</td>
                <td class="px-4 py-2 border-b border-gray-300">Begrænset (import())</td>
              </tr>
              <tr id="row-3" class="hidden">
                <td
                  colspan="3"
                  class="px-4 py-2 text-gray-700 bg-gray-100 border-b border-gray-300"
                >
                  <p>
                    CommonJS tillader dynamisk import hvor som helst i koden med `require`. ESM
                    kræver brug af `import()`, som er mere begrænset.
                  </p>
                </td>
              </tr>

              <!-- Row 4 -->
              <tr class="cursor-pointer" onclick="toggleRow(4)">
                <td class="px-4 py-2 border-b border-gray-300">Asynkronitet</td>
                <td class="px-4 py-2 border-b border-gray-300">Synkront</td>
                <td class="px-4 py-2 border-b border-gray-300">Asynkront</td>
              </tr>
              <tr id="row-4" class="hidden">
                <td
                  colspan="3"
                  class="px-4 py-2 text-gray-700 bg-gray-100 border-b border-gray-300"
                >
                  <p>
                    CommonJS er synkront, hvilket betyder, at moduler indlæses sekventielt. ESM er
                    asynkront, hvilket gør det bedre egnet til moderne applikationer.
                  </p>
                </td>
              </tr>

              <!-- Row 5 -->
              <tr class="cursor-pointer" onclick="toggleRow(5)">
                <td class="px-4 py-2">Tree-shaking</td>
                <td class="px-4 py-2">Ikke understøttet</td>
                <td class="px-4 py-2">Understøttet</td>
              </tr>
              <tr id="row-5" class="hidden">
                <td
                  colspan="3"
                  class="px-4 py-2 text-gray-700 bg-gray-100 border-b border-gray-300"
                >
                  <p>
                    ESM understøtter tree-shaking, så kun de moduler, der bruges, inkluderes i det
                    endelige bundt. Dette reducerer filstørrelsen og forbedrer ydeevnen.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Beskrivelse af funktionerne -->
        <div class="pt-6 space-y-8">
          <h3 class="pb-4 text-2xl font-bold text-gray-800 border-b">
            Beskrivelse af funktionerne
          </h3>

          <!-- Syntaks -->
          <div class="p-6 bg-white border-l-4 border-blue-500 rounded-lg shadow-lg">
            <h4 class="mb-2 text-xl font-semibold text-blue-600">Syntaks</h4>
            <p class="text-gray-700">
              Hvordan moduler importeres og eksporteres i CommonJS og ESM.
            </p>
            <ul class="pl-6 mt-4 space-y-2 text-gray-700 list-disc">
              <li>
                <span class="font-semibold">CommonJS (CJS):</span> Bruger <code>require</code> til
                at importere og <code>module.exports</code> til at eksportere moduler. Det er
                simpelt og velegnet til Node.js.
              </li>
              <li>
                <span class="font-semibold">ESM (EcmaScript-moduler):</span> Bruger
                <code>import</code> og <code>export</code>, som er mere moderne og understøtter
                optimering, såsom tree-shaking.
              </li>
              <li>
                <span class="font-semibold">Fagtermer:</span> <code>require</code>: Synkron import i
                CJS. <code>export/import</code>: Modulopdeling i ESM.
              </li>
            </ul>
          </div>

          <!-- Anvendelse -->
          <div class="p-6 bg-white border-l-4 border-green-500 rounded-lg shadow-lg">
            <h4 class="mb-2 text-xl font-semibold text-green-600">Anvendelse</h4>
            <p class="text-gray-700">
              Hvilke miljøer (Node.js eller browsere) de to modultyper kan bruges i.
            </p>
            <ul class="pl-6 mt-4 space-y-2 text-gray-700 list-disc">
              <li>
                <span class="font-semibold">CommonJS:</span> Designet til Node.js og fungerer ikke
                nativt i browsere uden bundling.
              </li>
              <li>
                <span class="font-semibold">ESM:</span> Understøttes både i moderne browsere og i
                Node.js.
              </li>
              <li>
                <span class="font-semibold">Fagtermer:</span> <code>miljø</code>: Omhandler hvor
                JavaScript eksekveres (browser eller server).
              </li>
            </ul>
          </div>

          <!-- Dynamisk import -->
          <div class="p-6 bg-white border-l-4 border-yellow-500 rounded-lg shadow-lg">
            <h4 class="mb-2 text-xl font-semibold text-yellow-600">Dynamisk import</h4>
            <p class="text-gray-700">
              Evnen til at importere moduler dynamisk, mens programmet kører.
            </p>
            <ul class="pl-6 mt-4 space-y-2 text-gray-700 list-disc">
              <li>
                <span class="font-semibold">CommonJS:</span> Tillader dynamisk import med
                <code>require</code>.
              </li>
              <li>
                <span class="font-semibold">ESM:</span> Kræver brug af <code>import()</code>, som
                returnerer et promise.
              </li>
              <li>
                <span class="font-semibold">Fagtermer:</span> <code>dynamisk import</code>: Import
                under kørselstid. <code>promise:</code> Et objekt, der repræsenterer en asynkron
                operation.
              </li>
            </ul>
          </div>

          <!-- Asynkronitet -->
          <div class="p-6 bg-white border-l-4 border-red-500 rounded-lg shadow-lg">
            <h4 class="mb-2 text-xl font-semibold text-red-600">Asynkronitet</h4>
            <p class="text-gray-700">Om modulhåndteringen er synkron (CJS) eller asynkron (ESM).</p>
            <ul class="pl-6 mt-4 space-y-2 text-gray-700 list-disc">
              <li>
                <span class="font-semibold">CommonJS:</span> Arbejder synkront og kan blokere
                programmet.
              </li>
              <li>
                <span class="font-semibold">ESM:</span> Arbejder asynkront, hvilket gør det bedre
                til moderne applikationer.
              </li>
              <li>
                <span class="font-semibold">Fagtermer:</span> <code>synkron:</code> Handlinger sker
                i rækkefølge. <code>asynkron:</code> Handlinger sker parallelt uden blokering.
              </li>
            </ul>
          </div>

          <!-- Tree-shaking -->
          <div class="p-6 bg-white border-l-4 border-purple-500 rounded-lg shadow-lg">
            <h4 class="mb-2 text-xl font-semibold text-purple-600">Tree-shaking</h4>
            <p class="text-gray-700">
              En optimering, hvor ubrugte dele af koden fjernes i ESM, men ikke i CJS.
            </p>
            <ul class="pl-6 mt-4 space-y-2 text-gray-700 list-disc">
              <li>
                <span class="font-semibold">CommonJS:</span> Understøtter ikke tree-shaking, da hele
                modulet indlæses.
              </li>
              <li>
                <span class="font-semibold">ESM:</span> Understøtter tree-shaking for at optimere
                bundling.
              </li>
              <li>
                <span class="font-semibold">Fagtermer:</span> <code>tree-shaking:</code> Fjerner
                ubrugte eksport-elementer. <code>bundle:</code> Kombinerer flere filer til én.
              </li>
            </ul>
          </div>
        </div>
      </section>

      <script>
        function toggleRow(rowId) {
          const row = document.getElementById(`row-${rowId}`);
          row.classList.toggle("hidden");
        }
      </script>

      <!-- //TODO - Omdøbning af Moduler og Brug af Aliaser -->
      <section class="container px-8 py-16 rounded-lg shadow-lg bg-gray-50">
        <div class="mx-auto space-y-12 max-w-7xl">
          <!-- Overskrift -->
          <h2 class="text-4xl font-bold text-purple-600">
            Omdøbning af Moduler og Brug af Aliaser
          </h2>

          <!-- Introduktion -->
          <div class="space-y-6 text-lg text-gray-700">
            <p>
              Når du importerer filer eller funktioner fra moduler, kan det være nødvendigt at
              omdøbe dem. Dette gøres for at:
            </p>
            <ul class="pl-6 space-y-4 list-disc">
              <li>
                <strong>Forbedre læsbarhed:</strong> Giv importeret funktionalitet et mere intuitivt
                navn.
              </li>
              <li>
                <strong>Undgå konflikter:</strong> Hvis flere moduler har samme navn, kan du omdøbe
                dem.
              </li>
              <li>
                <strong>Skjule stier:</strong> Brug aliaser for at gøre stier kortere og lettere at
                forstå.
              </li>
            </ul>
          </div>

          <!-- Eksempler -->
          <div>
            <h3 class="mb-4 text-2xl font-semibold text-gray-800">
              Eksempler på Omdøbning og Brug af Aliaser
            </h3>
            <p class="mb-6 text-gray-700">
              Her er eksempler på, hvordan du omdøber importerede moduler og bruger aliaser i både
              CommonJS og EcmaScript-moduler.
            </p>

            <!-- Eksempel: CommonJS -->
            <details class="p-4 mb-6 bg-blue-100 rounded-lg shadow">
              <summary class="text-lg font-semibold text-blue-600 cursor-pointer">
                Eksempel: Omdøbning med CommonJS
              </summary>
              <div class="mt-4">
                <pre class="p-4 text-sm bg-gray-800 rounded-lg text-gray-50">
<span class="text-green-400">// Import af modul og omdøbning</span>
const { pathConstructor: buildPath } = require("./modules/common-js-modules/pathConstructor.cjs");

<span class="text-green-400">// Brug af omdøbt funktion</span>
const filePath = buildPath("/public/index.html");
console.log(`Filsti: ${filePath}`);
          </pre>
                <p class="mt-4 text-gray-700">
                  Her importeres <code>pathConstructor</code> fra modulet, men omdøbes til
                  <code>buildPath</code> for bedre læsbarhed.
                </p>
              </div>
            </details>

            <!-- Eksempel: EcmaScript -->
            <details class="p-4 mb-6 bg-green-100 rounded-lg shadow">
              <summary class="text-lg font-semibold text-green-600 cursor-pointer">
                Eksempel: Omdøbning med EcmaScript
              </summary>
              <div class="mt-4">
                <pre class="p-4 text-sm bg-gray-800 rounded-lg text-gray-50">
<span class="text-green-400">// Import af modul og omdøbning</span>
import { pathConstructor as buildPath } from "./modules/es-modules/pathConstructor.mjs";

<span class="text-green-400">// Brug af omdøbt funktion</span>
const filePath = buildPath("/public/index.html");
console.log(`Filsti: ${filePath}`);
          </pre>
                <p class="mt-4 text-gray-700">
                  Her omdøbes <code>pathConstructor</code> til <code>buildPath</code>, hvilket kan
                  gøre koden mere intuitiv og undgå konflikter med andre moduler.
                </p>
              </div>
            </details>

            <!-- Eksempel: Brug af Alias -->
            <details class="p-4 bg-yellow-100 rounded-lg shadow">
              <summary class="text-lg font-semibold text-yellow-600 cursor-pointer">
                Eksempel: Brug af Alias for at Skjule Stier
              </summary>
              <div class="mt-4">
                <pre class="p-4 text-sm bg-gray-800 rounded-lg text-gray-50">
<span class="text-green-400">// Opsætning af alias i package.json (EcmaScript)</span>
{
  "name": "projekt",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {},
  "dependencies": {},
  "devDependencies": {},
  "type": "module",
  "imports": {
    "#utils/*": "./src/utils/*"
  }
}

<span class="text-green-400">// Import ved brug af alias</span>
import { pathConstructor } from "#utils/pathConstructor.mjs";

const filePath = pathConstructor("/public/index.html");
console.log(`Filsti: ${filePath}`);
          </pre>
                <p class="mt-4 text-gray-700">
                  Alias-konfiguration i <code>package.json</code> giver mulighed for at bruge
                  <code>#utils/*</code> i stedet for lange relative stier som
                  <code>./src/utils/*</code>. Dette forbedrer læsbarheden og gør vedligeholdelse
                  lettere.
                </p>
              </div>
            </details>
          </div>

          <!-- Fordele ved Omdøbning og Aliaser -->
          <div>
            <h3 class="mb-4 text-2xl font-semibold text-gray-800">
              Fordele ved Omdøbning og Aliaser
            </h3>
            <ul class="pl-6 space-y-4 text-gray-700 list-disc">
              <li>
                <strong>Bedre læsbarhed:</strong> Intuitive navne gør koden lettere at forstå og
                navigere.
              </li>
              <li>
                <strong>Konflikthåndtering:</strong> Undgå problemer, når moduler har samme navne.
              </li>
              <li>
                <strong>Effektiv navigation:</strong> Skjul komplekse stistrukturer med aliaser.
              </li>
              <li>
                <strong>Skalerbarhed:</strong> Styr store projekter med velorganiserede stier.
              </li>
            </ul>
          </div>
        </div>
      </section>
    </main>
    <!-- Footer -->
    <footer class="py-4 text-center text-white bg-accent">
      <p>Serveren kører på <strong>Node.js</strong>!</p>
    </footer>
  </body>
</html>
